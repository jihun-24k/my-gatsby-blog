---
title: Nginx와 웹서버
date: 2022-11-27
tags:
  - server
  - nginx
  - portfowarding
  - reversefowarding
---

### Nginx

Nginx는 아파치와 마찬가지로 웹서버 프로그램이다. 아파치보다 동작이 단순하고 전달자 역할만하기 때문에 동시접속 처리에 유리하다.

### 웹서버 프로그램(아파치, Nginx)를 사용하지 않았을 때 - 포트포워딩

만일 웹서버를 사용하지 않는다면 어떻게 통신하는지부터 알아봐야한다. 공유기에서 직접 여러대의 웹서버로 직접 연결하는 **`포트포워딩`** 을 사용할 것이다. 밑의 그림을 예시로 들어 1, 2, 3, 4 각각의 웹서버들에게 가상의 192.68.0.xxx ip 주소를 할당해주고 Port 80, 88, 8080을 통해 특정 포트를 요청하게 되면 공유기 자체에서 해당 포트를 사용하는 웹서버를 요청하는 방식을 사용한다.

하지만 이러한 방식의 단점은 URL이 난잡해지고 관리가 귀찮아진다. 또한 일반 사용자들이 접근해야하는 웹서버마다 포트번호를 알고 있어야하기 때문에 서버가 늘어날 수록 접근과 관리도 힘들어진다.

![이미지 출처: [https://akal.co.kr/?p=1173](https://akal.co.kr/?p=1173)](port-fowarding.png)

### 웹서버 프로그램을 사용했을 때 - 리버스 프록시

클라이언트에서 받아오는 요청(Request)를 아파치나 Nginx 같은 웹서버들을 이용해 먼저 값을 받은 다음 하위 웹서버로 넘겨주는데 이러한 방식을 **`리버스 프록시(reverse proxy)`**라고 한다. 이때 웹서버 프로그램은 URL 매핑에 의해 동일한 Port 80으로 요청받고 응답하게 된다.

따라서 사용자들은 접근해야할 서버의 포트를 일일이 안알아도 되고 관리 또한 필요하지 않아 쉽게 사용할 수 있다.

![이미지 출처: [https://akal.co.kr/?p=1173](https://akal.co.kr/?p=1173)](reverse-fowarding.png)

### 리버스 프록시를 사용하는 이유

1. 보안과 익명성
    
    앞단에서 웹서버 프로그램(아파치, Nginx)가 하위 서버들의 구조들을 감추는 역할을 하기 때문에 보안상의 이점이 있다. 서버 내부의 파일들과 해당 서버가 몇번 포트에서 동작하고 있는지를 감추면서 보안성을 높인다.
    
2. 로드 밸런싱 처리
    
    보통 내부의 WAS는 하나가 아닌 여러개가 돌아가게 되는데 이를 관리해주지 않으면 여러개의 요청이 하나의 웹서버에 몰릴 수 있다. 이를 웹서버가 골고루 분배해주며 서버의 과부하를 덜어줄 수 있다.

### 참고
[[우분투, 민트] nginX에서 reverse proxy(리버스 프록시) 사용하기](https://akal.co.kr/?p=1173)